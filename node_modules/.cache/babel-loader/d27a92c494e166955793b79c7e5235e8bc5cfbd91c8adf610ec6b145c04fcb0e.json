{"ast":null,"code":"var _jsxFileName = \"/Users/friizi/Documents/Project/node/secret-birthday/react/src/components/AdminPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { Card } from \"primereact/card\";\nimport { Button } from \"primereact/button\";\nimport { Dropdown } from \"primereact/dropdown\";\nimport { Toast } from \"primereact/toast\";\nimport { RankingProvider, useRanking } from \"./RankingContext\";\nimport Menu from \"./Menu\";\nimport axios from \"axios\";\nimport \"./AdminPage.css\";\nimport secretStoryLogo from \"./images/Secret_Story_Logo.png\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AdminPage = () => {\n  _s();\n  const {\n    rankings,\n    loading\n  } = useRanking();\n  const [nominantOptions, setNominantOptions] = useState([]);\n  const [nomineeOptions, setNomineeOptions] = useState([]);\n  const [secretOptions, setSecretOptions] = useState([]);\n  const [selectedNominant, setSelectedNominant] = useState(null);\n  const [selectedNominee, setSelectedNominee] = useState(null);\n  const [selectedSecret, setSelectedSecret] = useState(null);\n  const [toastMessage, setToastMessage] = useState(null);\n  const toast = useRef(null); // Référence pour le composant Toast\n\n  useEffect(() => {\n    // Alimenter les options des listes déroulantes à partir de rankings\n    if (!loading && rankings) {\n      // Filtrer les participants avec find égal à 0\n      const nominantOptions = rankings.map(participant => ({\n        label: participant.nom,\n        value: participant.nom\n      }));\n      const nomineeOptions = [];\n      const secretOptions = [];\n      for (const participant of rankings) {\n        if (participant.find === 0) {\n          nomineeOptions.push({\n            label: participant.nom,\n            value: participant.nom\n          });\n          secretOptions.push({\n            label: participant.secret,\n            value: participant.secret\n          });\n        }\n      }\n      setNominantOptions(nominantOptions);\n      setNomineeOptions(nomineeOptions);\n      setSecretOptions(secretOptions);\n    }\n  }, [loading, rankings]);\n  const handleNominationSubmit = () => {\n    axios.post(\"http://localhost:3001/api/nominate\", {\n      nominant: selectedNominant,\n      nominee: selectedNominee,\n      secret: selectedSecret\n    }).then(response => {\n      console.log(\"Nomination réussie !\", response.data);\n      // Affichage du message Toast en cas de succès\n      setToastMessage({\n        severity: \"success\",\n        summary: \"Succès\",\n        detail: \"Nomination réussie !\"\n      });\n      // Effacez le message après un certain délai (par exemple, 3000 millisecondes)\n      setTimeout(() => setToastMessage(null), 3000);\n    }).catch(error => {\n      console.error(\"Erreur lors de la nomination :\", error);\n      // Affichage du message Toast en cas d'erreur\n      setToastMessage({\n        severity: \"error\",\n        summary: \"Erreur\",\n        detail: \"Erreur lors de la nomination.\"\n      });\n      // Effacez le message après un certain délai (par exemple, 3000 millisecondes)\n      setTimeout(() => setToastMessage(null), 3000);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"public-page admin-page2\",\n    children: [/*#__PURE__*/_jsxDEV(Toast, {\n      ref: toast\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n      src: secretStoryLogo,\n      alt: \"Logo Secret Story\",\n      className: \"logo\",\n      style: {\n        width: \"300px\",\n        height: \"auto\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Card, {\n      className: \"card2\",\n      children: [/*#__PURE__*/_jsxDEV(Menu, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"nomination-form2\",\n        children: [/*#__PURE__*/_jsxDEV(Dropdown, {\n          value: selectedNominant,\n          options: nominantOptions,\n          onChange: e => setSelectedNominant(e.value),\n          placeholder: \"S\\xE9lectionnez un nominant\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Dropdown, {\n          value: selectedNominee,\n          options: nomineeOptions,\n          onChange: e => setSelectedNominee(e.value),\n          placeholder: \"S\\xE9lectionnez un nomin\\xE9\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Dropdown, {\n          value: selectedSecret,\n          options: secretOptions,\n          onChange: e => setSelectedSecret(e.value),\n          placeholder: \"S\\xE9lectionnez un secret\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          label: \"Nomination\",\n          icon: \"pi pi-check2\",\n          onClick: handleNominationSubmit,\n          className: \"p-button2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 5\n  }, this);\n};\n_s(AdminPage, \"K1KKlVVnACzjwyp+6y0LDjKFFX4=\", false, function () {\n  return [useRanking];\n});\n_c = AdminPage;\nconst App = () => {\n  return /*#__PURE__*/_jsxDEV(RankingProvider, {\n    children: /*#__PURE__*/_jsxDEV(AdminPage, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 131,\n    columnNumber: 5\n  }, this);\n};\n_c2 = App;\nexport default App;\nvar _c, _c2;\n$RefreshReg$(_c, \"AdminPage\");\n$RefreshReg$(_c2, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useRef","Card","Button","Dropdown","Toast","RankingProvider","useRanking","Menu","axios","secretStoryLogo","jsxDEV","_jsxDEV","AdminPage","_s","rankings","loading","nominantOptions","setNominantOptions","nomineeOptions","setNomineeOptions","secretOptions","setSecretOptions","selectedNominant","setSelectedNominant","selectedNominee","setSelectedNominee","selectedSecret","setSelectedSecret","toastMessage","setToastMessage","toast","map","participant","label","nom","value","find","push","secret","handleNominationSubmit","post","nominant","nominee","then","response","console","log","data","severity","summary","detail","setTimeout","catch","error","className","children","ref","fileName","_jsxFileName","lineNumber","columnNumber","src","alt","style","width","height","options","onChange","e","placeholder","icon","onClick","_c","App","_c2","$RefreshReg$"],"sources":["/Users/friizi/Documents/Project/node/secret-birthday/react/src/components/AdminPage.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport { Card } from \"primereact/card\";\nimport { Button } from \"primereact/button\";\nimport { Dropdown } from \"primereact/dropdown\";\nimport { Toast } from \"primereact/toast\";\nimport { RankingProvider, useRanking } from \"./RankingContext\";\nimport Menu from \"./Menu\";\nimport axios from \"axios\";\nimport \"./AdminPage.css\";\nimport secretStoryLogo from \"./images/Secret_Story_Logo.png\";\n\nconst AdminPage = () => {\n  const { rankings, loading } = useRanking();\n  const [nominantOptions, setNominantOptions] = useState([]);\n  const [nomineeOptions, setNomineeOptions] = useState([]);\n  const [secretOptions, setSecretOptions] = useState([]);\n  const [selectedNominant, setSelectedNominant] = useState(null);\n  const [selectedNominee, setSelectedNominee] = useState(null);\n  const [selectedSecret, setSelectedSecret] = useState(null);\n\n  const [toastMessage, setToastMessage] = useState(null);\n  const toast = useRef(null); // Référence pour le composant Toast\n\n  useEffect(() => {\n    // Alimenter les options des listes déroulantes à partir de rankings\n    if (!loading && rankings) {\n      // Filtrer les participants avec find égal à 0\n      const nominantOptions = rankings.map((participant) => ({\n        label: participant.nom,\n        value: participant.nom,\n      }));\n\n      const nomineeOptions = [];\n      const secretOptions = [];\n\n      for (const participant of rankings) {\n        if (participant.find === 0) {\n          nomineeOptions.push({\n            label: participant.nom,\n            value: participant.nom,\n          });\n\n          secretOptions.push({\n            label: participant.secret,\n            value: participant.secret,\n          });\n        }\n      }\n\n      setNominantOptions(nominantOptions);\n      setNomineeOptions(nomineeOptions);\n      setSecretOptions(secretOptions);\n    }\n  }, [loading, rankings]);\n\n  const handleNominationSubmit = () => {\n    axios\n      .post(\"http://localhost:3001/api/nominate\", {\n        nominant: selectedNominant,\n        nominee: selectedNominee,\n        secret: selectedSecret,\n      })\n      .then((response) => {\n        console.log(\"Nomination réussie !\", response.data);\n        // Affichage du message Toast en cas de succès\n        setToastMessage({\n          severity: \"success\",\n          summary: \"Succès\",\n          detail: \"Nomination réussie !\",\n        });\n        // Effacez le message après un certain délai (par exemple, 3000 millisecondes)\n        setTimeout(() => setToastMessage(null), 3000);\n      })\n      .catch((error) => {\n        console.error(\"Erreur lors de la nomination :\", error);\n        // Affichage du message Toast en cas d'erreur\n        setToastMessage({\n          severity: \"error\",\n          summary: \"Erreur\",\n          detail: \"Erreur lors de la nomination.\",\n        });\n        // Effacez le message après un certain délai (par exemple, 3000 millisecondes)\n        setTimeout(() => setToastMessage(null), 3000);\n      });\n  };\n\n  return (\n    <div className=\"public-page admin-page2\">\n      <Toast ref={toast} />\n      <img\n        src={secretStoryLogo}\n        alt=\"Logo Secret Story\"\n        className=\"logo\"\n        style={{ width: \"300px\", height: \"auto\" }}\n      />\n      <Card className=\"card2\">\n        <Menu />\n        <div className=\"nomination-form2\">\n          <Dropdown\n            value={selectedNominant}\n            options={nominantOptions}\n            onChange={(e) => setSelectedNominant(e.value)}\n            placeholder=\"Sélectionnez un nominant\"\n          />\n          <Dropdown\n            value={selectedNominee}\n            options={nomineeOptions}\n            onChange={(e) => setSelectedNominee(e.value)}\n            placeholder=\"Sélectionnez un nominé\"\n          />\n          <Dropdown\n            value={selectedSecret}\n            options={secretOptions}\n            onChange={(e) => setSelectedSecret(e.value)}\n            placeholder=\"Sélectionnez un secret\"\n          />\n          <Button\n            label=\"Nomination\"\n            icon=\"pi pi-check2\"\n            onClick={handleNominationSubmit}\n            className=\"p-button2\"\n          />\n        </div>\n      </Card>\n    </div>\n  );\n};\n\nconst App = () => {\n  return (\n    <RankingProvider>\n      <AdminPage />\n    </RankingProvider>\n  );\n};\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}