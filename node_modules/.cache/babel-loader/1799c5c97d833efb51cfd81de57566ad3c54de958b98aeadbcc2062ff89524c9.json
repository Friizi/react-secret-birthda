{"ast":null,"code":"var _jsxFileName = \"/Users/friizi/Documents/Project/node/secret-birthday/react/src/components/AdminPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { Card } from \"primereact/card\";\nimport { Button } from \"primereact/button\";\nimport { Dropdown } from \"primereact/dropdown\";\nimport { Toast } from \"primereact/toast\"; // Importez Toast depuis primereact/toast\nimport { RankingProvider, useRanking } from \"./RankingContext\";\nimport Menu from \"./Menu\";\nimport axios from \"axios\";\nimport \"./AdminPage.css\";\nimport secretStoryLogo from \"./images/Secret_Story_Logo.png\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AdminPage = () => {\n  _s();\n  const {\n    rankings,\n    loading\n  } = useRanking();\n  const [nominantOptions, setNominantOptions] = useState([]);\n  const [nomineeOptions, setNomineeOptions] = useState([]);\n  const [secretOptions, setSecretOptions] = useState([]);\n  const [selectedNominant, setSelectedNominant] = useState(null);\n  const [selectedNominee, setSelectedNominee] = useState(null);\n  const [selectedSecret, setSelectedSecret] = useState(null);\n  const [toastMessage, setToastMessage] = useState(null); // État pour les messages de toast\n\n  useEffect(() => {\n    // Alimenter les options des listes déroulantes à partir de rankings\n    if (!loading && rankings) {\n      // Filtrer les participants avec find égal à 0\n      const nominantOptions = rankings.map(participant => ({\n        label: participant.nom,\n        value: participant.nom\n      }));\n      const nomineeOptions = rankings.filter(participant => participant.find !== 1).map(participant => ({\n        label: participant.nom,\n        value: participant.nom\n      }));\n\n      // Filtrer les participants avec find égal à 0\n      const secretOptions = rankings.filter(participant => participant.find !== 1).map(participant => ({\n        label: participant.secret,\n        value: participant.secret\n      }));\n      setNominantOptions(nominantOptions);\n      setNomineeOptions(nomineeOptions); // Utilisez la même liste pour les nominés\n      setSecretOptions(secretOptions);\n    }\n  }, [loading, rankings]);\n  const handleNominationSubmit = () => {\n    axios.post(\"http://localhost:3001/api/nominate\", {\n      nominant: selectedNominant,\n      nominee: selectedNominee,\n      secret: selectedSecret\n    }).then(response => {\n      // Gérez la réponse de l'API si nécessaire\n      console.log(\"Nomination réussie !\", response.data);\n      setToastMessage({\n        severity: \"success\",\n        summary: \"Succès\",\n        detail: \"Nomination réussie !\"\n      });\n      // Effacez le message après un certain délai (par exemple, 3000 millisecondes)\n      setTimeout(() => setToastMessage(null), 3000);\n    }).catch(error => {\n      // Gérez les erreurs de l'API si nécessaire\n      console.error(\"Erreur lors de la nomination :\", error);\n      setToastMessage({\n        severity: \"error\",\n        summary: \"Erreur\",\n        detail: \"Erreur lors de la nomination.\"\n      });\n      // Effacez le message après un certain délai (par exemple, 3000 millisecondes)\n      setTimeout(() => setToastMessage(null), 3000);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"public-page admin-page2\",\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      src: secretStoryLogo,\n      alt: \"Logo Secret Story\",\n      className: \"logo\",\n      style: {\n        width: \"300px\",\n        height: \"auto\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Card, {\n      className: \"card2\",\n      children: [/*#__PURE__*/_jsxDEV(Menu, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"nomination-form2\",\n        children: [/*#__PURE__*/_jsxDEV(Dropdown, {\n          value: selectedNominant,\n          options: nominantOptions,\n          onChange: e => setSelectedNominant(e.value),\n          placeholder: \"S\\xE9lectionnez un nominant\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Dropdown, {\n          value: selectedNominee,\n          options: nomineeOptions,\n          onChange: e => setSelectedNominee(e.value),\n          placeholder: \"S\\xE9lectionnez un nomin\\xE9\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Dropdown, {\n          value: selectedSecret,\n          options: secretOptions,\n          onChange: e => setSelectedSecret(e.value),\n          placeholder: \"S\\xE9lectionnez un secret\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          label: \"Nomination\",\n          icon: \"pi pi-check2\",\n          onClick: handleNominationSubmit,\n          className: \"p-button2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this), toastMessage && /*#__PURE__*/_jsxDEV(Toast, {\n      position: \"top-right\",\n      severity: toastMessage.severity,\n      summary: toastMessage.summary,\n      detail: toastMessage.detail\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 5\n  }, this);\n};\n_s(AdminPage, \"VoaNRYdz0+49PSIE8/wHbKs9vPg=\", false, function () {\n  return [useRanking];\n});\n_c = AdminPage;\nconst App = () => {\n  return /*#__PURE__*/_jsxDEV(RankingProvider, {\n    children: /*#__PURE__*/_jsxDEV(AdminPage, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 136,\n    columnNumber: 5\n  }, this);\n};\n_c2 = App;\nexport default App;\nvar _c, _c2;\n$RefreshReg$(_c, \"AdminPage\");\n$RefreshReg$(_c2, \"App\");","map":{"version":3,"names":["React","useState","useEffect","Card","Button","Dropdown","Toast","RankingProvider","useRanking","Menu","axios","secretStoryLogo","jsxDEV","_jsxDEV","AdminPage","_s","rankings","loading","nominantOptions","setNominantOptions","nomineeOptions","setNomineeOptions","secretOptions","setSecretOptions","selectedNominant","setSelectedNominant","selectedNominee","setSelectedNominee","selectedSecret","setSelectedSecret","toastMessage","setToastMessage","map","participant","label","nom","value","filter","find","secret","handleNominationSubmit","post","nominant","nominee","then","response","console","log","data","severity","summary","detail","setTimeout","catch","error","className","children","src","alt","style","width","height","fileName","_jsxFileName","lineNumber","columnNumber","options","onChange","e","placeholder","icon","onClick","position","_c","App","_c2","$RefreshReg$"],"sources":["/Users/friizi/Documents/Project/node/secret-birthday/react/src/components/AdminPage.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Card } from \"primereact/card\";\nimport { Button } from \"primereact/button\";\nimport { Dropdown } from \"primereact/dropdown\";\nimport { Toast } from \"primereact/toast\"; // Importez Toast depuis primereact/toast\nimport { RankingProvider, useRanking } from \"./RankingContext\";\nimport Menu from \"./Menu\";\nimport axios from \"axios\";\nimport \"./AdminPage.css\";\nimport secretStoryLogo from \"./images/Secret_Story_Logo.png\";\n\nconst AdminPage = () => {\n  const { rankings, loading } = useRanking();\n  const [nominantOptions, setNominantOptions] = useState([]);\n  const [nomineeOptions, setNomineeOptions] = useState([]);\n  const [secretOptions, setSecretOptions] = useState([]);\n  const [selectedNominant, setSelectedNominant] = useState(null);\n  const [selectedNominee, setSelectedNominee] = useState(null);\n  const [selectedSecret, setSelectedSecret] = useState(null);\n\n  const [toastMessage, setToastMessage] = useState(null); // État pour les messages de toast\n\n  useEffect(() => {\n    // Alimenter les options des listes déroulantes à partir de rankings\n    if (!loading && rankings) {\n      // Filtrer les participants avec find égal à 0\n      const nominantOptions = rankings.map((participant) => ({\n        label: participant.nom,\n        value: participant.nom,\n      }));\n\n      const nomineeOptions = rankings\n        .filter((participant) => participant.find !== 1)\n        .map((participant) => ({\n          label: participant.nom,\n          value: participant.nom,\n        }));\n\n      // Filtrer les participants avec find égal à 0\n      const secretOptions = rankings\n        .filter((participant) => participant.find !== 1)\n        .map((participant) => ({\n          label: participant.secret,\n          value: participant.secret,\n        }));\n\n      setNominantOptions(nominantOptions);\n      setNomineeOptions(nomineeOptions); // Utilisez la même liste pour les nominés\n      setSecretOptions(secretOptions);\n    }\n  }, [loading, rankings]);\n\n  const handleNominationSubmit = () => {\n    axios\n      .post(\"http://localhost:3001/api/nominate\", {\n        nominant: selectedNominant,\n        nominee: selectedNominee,\n        secret: selectedSecret,\n      })\n      .then((response) => {\n        // Gérez la réponse de l'API si nécessaire\n        console.log(\"Nomination réussie !\", response.data);\n        setToastMessage({\n          severity: \"success\",\n          summary: \"Succès\",\n          detail: \"Nomination réussie !\",\n        });\n        // Effacez le message après un certain délai (par exemple, 3000 millisecondes)\n        setTimeout(() => setToastMessage(null), 3000);\n      })\n      .catch((error) => {\n        // Gérez les erreurs de l'API si nécessaire\n        console.error(\"Erreur lors de la nomination :\", error);\n        setToastMessage({\n          severity: \"error\",\n          summary: \"Erreur\",\n          detail: \"Erreur lors de la nomination.\",\n        });\n        // Effacez le message après un certain délai (par exemple, 3000 millisecondes)\n        setTimeout(() => setToastMessage(null), 3000);\n      });\n  };\n\n  return (\n    <div className=\"public-page admin-page2\">\n      <img\n        src={secretStoryLogo}\n        alt=\"Logo Secret Story\"\n        className=\"logo\"\n        style={{ width: \"300px\", height: \"auto\" }}\n      />\n      <Card className=\"card2\">\n        <Menu />\n        <div className=\"nomination-form2\">\n          <Dropdown\n            value={selectedNominant}\n            options={nominantOptions}\n            onChange={(e) => setSelectedNominant(e.value)}\n            placeholder=\"Sélectionnez un nominant\"\n          />\n          <Dropdown\n            value={selectedNominee}\n            options={nomineeOptions}\n            onChange={(e) => setSelectedNominee(e.value)}\n            placeholder=\"Sélectionnez un nominé\"\n          />\n          <Dropdown\n            value={selectedSecret}\n            options={secretOptions}\n            onChange={(e) => setSelectedSecret(e.value)}\n            placeholder=\"Sélectionnez un secret\"\n          />\n          <Button\n            label=\"Nomination\"\n            icon=\"pi pi-check2\"\n            onClick={handleNominationSubmit}\n            className=\"p-button2\"\n          />\n        </div>\n      </Card>\n      {/* Afficher le toast en fonction de l'état toastMessage */}\n      {toastMessage && (\n        <Toast\n          position=\"top-right\"\n          severity={toastMessage.severity}\n          summary={toastMessage.summary}\n          detail={toastMessage.detail}\n        />\n      )}\n    </div>\n  );\n};\n\nconst App = () => {\n  return (\n    <RankingProvider>\n      <AdminPage />\n    </RankingProvider>\n  );\n};\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}